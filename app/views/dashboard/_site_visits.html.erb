<!-- BEGIN PORTLET-->
<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon-bar-chart font-green"></i>
            <span class="caption-subject font-green bold uppercase">Site Visits</span>
            <span class="caption-helper">weekly stats...</span>
        </div>
        <div class="actions">
            <div class="btn-group btn-group-devided" data-toggle="buttons">
                <label class="btn red btn-outline btn-circle btn-sm active">
                    <input type="radio" name="options" class="toggle" id="option1">新訪客</label>
                <label class="btn red btn-outline btn-circle btn-sm">
                    <input type="radio" name="options" class="toggle" id="option2">回訪</label>
            </div>
        </div>
    </div>
    <div class="portlet-body">
        <div id="site_statistics_loading">
            <img src="../assets/global/img/loading.gif" alt="loading" /> </div>
        <div id="site_statistics_content" class="display-none">
            <div id="site_statistics" class="chart"> </div>
        </div>
    </div>
</div>
<!-- END PORTLET-->
<script>
if ($('#site_statistics').size() != 0) {

    $('#site_statistics_loading').hide();
    $('#site_statistics_content').show();

    var plot_statistics = $.plot($("#site_statistics"), [{
            data: visitors,
            lines: {
                fill: 0.6,
                lineWidth: 0
            },
            color: ['#f89f9f']
        }, {
            data: visitors,
            points: {
                show: true,
                fill: true,
                radius: 5,
                fillColor: "#f89f9f",
                lineWidth: 3
            },
            color: '#fff',
            shadowSize: 0
        }],

        {
            xaxis: {
                tickLength: 0,
                tickDecimals: 0,
                mode: "categories",
                min: 0,
                font: {
                    lineHeight: 14,
                    style: "normal",
                    variant: "small-caps",
                    color: "#6F7B8A"
                }
            },
            yaxis: {
                ticks: 5,
                tickDecimals: 0,
                tickColor: "#eee",
                font: {
                    lineHeight: 14,
                    style: "normal",
                    variant: "small-caps",
                    color: "#6F7B8A"
                }
            },
            grid: {
                hoverable: true,
                clickable: true,
                tickColor: "#eee",
                borderColor: "#eee",
                borderWidth: 1
            }
        });

    var previousPoint = null;
    $("#site_statistics").bind("plothover", function(event, pos, item) {
        $("#x").text(pos.x.toFixed(2));
        $("#y").text(pos.y.toFixed(2));
        if (item) {
            if (previousPoint != item.dataIndex) {
                previousPoint = item.dataIndex;

                $("#tooltip").remove();
                var x = item.datapoint[0].toFixed(2),
                    y = item.datapoint[1].toFixed(2);

                showChartTooltip(item.pageX, item.pageY, item.datapoint[0], item.datapoint[1] + ' visits');
            }
        } else {
            $("#tooltip").remove();
            previousPoint = null;
        }
    });
}
</script>
